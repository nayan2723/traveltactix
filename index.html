<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/src/assets/logo.png" type="image/png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelTacTix - Your Journey Begins Here</title>
    <meta name="description" content="Discover offbeat destinations, experience local cultures, and turn every trip into an unforgettable adventure." />
    <meta name="author" content="TravelTacTix" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#667eea" />
    
    <!-- Osmo-Inspired Fonts - Elegant Sans-Serif -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"></noscript>

    <meta property="og:title" content="TravelTacTix - Adventure Awaits" />
    <meta property="og:description" content="Discover the world differently" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // Service Worker: enable only in production to avoid dev caching issues
      if ('serviceWorker' in navigator) {
        if (import.meta.env.PROD) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js')
              .then(registration => {
                console.log('SW registered:', registration);
              })
              .catch(error => {
                console.log('SW registration failed:', error);
              });
          });
        } else {
          // Development: aggressively remove any SW and caches, then hard-reload once
          const cleanedFlag = 'sw_cleaned_once';
          (async () => {
            try {
              const regs = await navigator.serviceWorker.getRegistrations();
              await Promise.all(regs.map(r => r.unregister()));
              if ('caches' in window) {
                const keys = await caches.keys();
                await Promise.all(keys.map(k => caches.delete(k)));
              }
              if (!sessionStorage.getItem(cleanedFlag)) {
                sessionStorage.setItem(cleanedFlag, '1');
                location.reload();
              } else {
                sessionStorage.removeItem(cleanedFlag);
              }
            } catch (e) {
              console.log('SW cleanup error:', e);
            }
          })();
        }
      }
    </script>
  </body>
</html>
